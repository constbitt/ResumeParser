# English-Hebrew resume parser
Веб-приложение для извлечения ключевых атрибутов резюме (имя, дата рождения, телефон, почта, ссылки, образование, языки) 

# 1. Файл app. py 
-   index() - функция-обработчик маршрута '/' (главной страницы), принимает GET и POST запросы.  
При GET запросе она просто отображает HTML-шаблон 'index.html'.
При POST запросе, если данные были отправлены через форму, функция получает текст из поля ввода или файл PDF из поля ввода файла.
Далее сохраняет файл PDF на сервере в папку 'static'.
Затем вызывает функцию extract_attributes() для извлечения атрибутов из файла PDF.
Если происходит ошибка при обработке файла, выводится сообщение об ошибке.
Затем файл PDF конвертируется в PDF-файл для предпросмотра и отображения на веб-странице.
Наконец, отображает HTML-шаблон 'index.html' с извлеченными атрибутами и файлом PDF.
- copy_data() - это функция-обработчик маршрута '/copy_data' для запросов методом POST. 
Она принимает данные JSON, преобразует их в формат CSV с разделителем табуляции и копирует полученные данные в буфер обмена.
- process_data() - это функция-обработчик маршрута '/process_data' для запросов методом POST.
Она принимает данные JSON, преобразует их в формат CSV с разделителем точка с запятой и возвращает полученные данные в виде JSON-объекта.


# 2. Папка attributes_extractor
## 2.1. Файл attributes_extractor. py
- extract_attributes(file_path, language) - метод, который используется для извлечения атрибутов из текста. Она создает экземпляр класса TextExtractor и извлекает с его помощью текст из файла. Если извлечение текста завершается с ошибкой из-за неправильного формата файла, функция возвращает строку "format_error".
Далее загружается модель языка для обработки текста с использованием библиотеки SpaCy (en_core_web_sm для английского языка).
В зависимости от выбранного языка (hebrew или english), к объекту nlp добавляется соответствующий "pipe" для обработки текста на соответствующем языке.
Затем вызывается функция extract_hebrew() или extract_english(), которая обрабатывает текст и извлекает атрибуты соответствующего языка.
Возвращаются извлеченные атрибуты: имя, дата рождения, номера телефонов, адреса электронной почты, ссылки, образование и языки.
## 2.2. Папка english
### 2.2.1. Файл english_extractor. py
- Функция extract_english() выполняет извлечение различных атрибутов из резюме на английском языке. 
### 2.2.2. Папка data_extraction
#### 2.2.2.1. Файл education_extractor. py
- extract_education() извлекает информацию об образовании из текста резюме на английском языке. В переменных education_pattern и university_pattern определены шаблоны для обнаружения образования и названий университетов соответственно. Эти шаблоны используются для поиска ключевых слов и частей речи, характерных для образования и университетов.
    -   Функция extract_matching() вызывается для извлечения соответствующих сущностей из текста резюме, используя заданные шаблоны и стоп-слова. Результаты извлечения образования и университетов объединяются вместе, если они находятся в близком контексте друг к другу. Для этого проверяется наличие общего суффикса между образованием и университетом, а также расстояние между ними в тексте.
#### 2.2.2.2. Файл entities_extractor. py
- функция extract_entities() используется для извлечения именных сущностей из текста с помощью инструмента для обработки естественного языка.
#### 2.2.2.3. Файл matcher_extractor. py
- extract_matching() используется для извлечения соответствующих фрагментов текста на основе заданных шаблонов. Создается объект Matcher из библиотеки spaCy для сопоставления текста с предоставленными шаблонами.
Каждый переданный шаблон добавляется в объект Matcher с помощью метода matcher.add().
    -   Текст обрабатывается с использованием инструмента для обработки естественного языка (nlp), чтобы создать объект doc. Matcher ищет совпадения между текстом и добавленными шаблонами. Для каждого найденного совпадения извлекается соответствующий фрагмент текста. Извлеченные фрагменты добавляются в список matching_list.
    -   Если переданы стоп-слова, из списка извлеченных фрагментов удаляются те, которые содержат эти слова.
    -   Извлеченный список подвергается процедуре очистки с помощью объекта ListCleaner, который удаляет дубликаты и проводит другие операции очистки. Возвращается очищенный список извлеченных фрагментов текста.
#### 2.2.2.4. Файл name_extractor. py
- extract_name() используется для извлечения имени из текста с помощью регулярных выражений и инструмента для обработки естественного языка (spaCy). 
## 2.3. Папка hebrew
### 2.2.1. Файл hebrew_extractor. py
- extract_hebrew() которая используется для извлечения информации из резюме на иврите.
### 2.2.2. Папка data_extraction
#### 2.2.2.1. Файл education_extractor. py
- extract_education() используется для извлечения информации об образовании из текста резюме на иврите. Вот краткое описание каждой части кода:
- education_pattern это список шаблонов, представляющих возможные комбинации ключевых слов, указывающих на уровень образования (например, "бакалавр", "магистр") и область знаний (например, "математика", "физика").
- universities - список ключевых слов, представляющих возможные варианты названий университетов.
university_pattern - список шаблонов для извлечения информации о названиях университетов из текста.
extract_something(text, pattern) - это функция, которая принимает текст и шаблон, применяет шаблон к тексту и извлекает совпадающие участки текста.
- check_substrings_distance(text, substring1, substring2) - это функция, которая проверяет расстояние между двумя подстроками в тексте.
extract_education(text) применяет шаблоны education_pattern и university_pattern к тексту, извлекает информацию об образовании и университетах, а затем комбинирует их в список строк, представляющих образование с указанием университета.
    
#### 2.2.2.2. Файл matcher_extractor. py

- Эта extract_matching(text, pattern) предназначена для извлечения соответствующих шаблонов из текста. 
text - текст, из которого нужно извлечь соответствия шаблону.
pattern - шаблон для поиска в тексте.
Обработка:
Создается объект matcher типа CustomMatcher с использованием предоставленного pattern.
Текст разбивается на слова с помощью функции custom_splitter.
Запускается поиск совпадений с использованием объекта matcher для разбитых на слова текста.
Найденные совпадения добавляются в список matching_list.
Затем список очищается от дубликатов и ненужных элементов с помощью объекта ListCleaner.

#### 2.2.2.3. Файл name_extractor. py
- extract_name(text, nlp) извлекает имя из предоставленного текста с использованием обработки естественного языка через библиотеку spaCy.
## 2.4. Папка general_methods
### 2.4.1. Файл text_extractor. py
- здесь содержится класс TextExtractor, предназначенный для извлечения текста из различных типов файлов, таких как .docx, .doc, .pdf, .txt, .rtf, .md, .html, .htm.
### 2.4.2. Папка auxilary_methods
#### 2.4.2.1. файл custom_matcher. py
- Класс CustomMatcher представляет собой настраиваемый поиск шаблонов в тексте. (аналог Matcher Spacy) -   Поддерживает различные типы шаблонов, такие как TEXT, OP, IN, ANY и AND. Возвращает True, если токен соответствует шаблону, в противном случае - False.
#### 2.4.2.2. файл custom_splitter. py
- custom_splitter разбивает текст на отдельные слова и символы пунктуации, убирая дублирующиеся пробелы и пустые строки.
#### 2.4.2.3. файл list_cleaner. py
-  класс ListCleaner предназначен для очистки списка слов от дубликатов и почти полностью вложенных подмножеств.
### 2.4.3. Папка data_extraction 
#### 2.4.3.1. файл birth_extractor. py
- Извлекает дату рождения, используя dates_extractor. py
#### 2.4.3.2. файл dates_extractor. py
- Извлекает даты в различных форматах
#### 2.4.3.3. файл language_extractor. py
- Извлекает языки с помощью словаря
#### 2.4.3.4. файл link_extractor. py
- Извлекает ссылки в различных форматах
#### 2.4.3.5. файл mail_extractor. py
- Извлекает почты в различных форматах
#### 2.4.3.6. файл phone_extrcator. py
- Извлекает номера телефонов в различных форматах
# 4. Папка templates
## 4.1. Файл base.html 
- Этот HTML-шаблон является основой для веб-страницы и используется в приложении для отображения содержимого. 
## 4.2. Файл index.html
- Этот HTML-шаблон расширяет базовый шаблон base.html и определяет контент для конкретной веб-страницы.
# 5. Файл pdf_converter. py
- содержит класс FileConverter, предназначенный для конвертации различных типов файлов (.docx, .doc, .pdf, .txt, .rtf, .md, .html, .htm) в формат PDF.  
Если формат файла не поддерживается, выводится сообщение "Unsupported file format"
# 6. Файл utils. py
- функция to_csv_format() преобразует данные, переданные в виде словаря data, в формат CSV с использованием определенного разделителя.
